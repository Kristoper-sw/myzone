# MyZone æ€§èƒ½ä¼˜åŒ–æŒ‡å—

## ğŸš€ å·²å®Œæˆçš„ä¼˜åŒ–

### 1. å‰ç«¯ä¼˜åŒ–

#### âœ… ç§»é™¤ç¡¬ç¼–ç åœ°å€
- **ä¿®æ”¹æ–‡ä»¶**: `main.js`, `MapComponent.vue`, `ContentUpload.vue`, `PostDetail.vue`, `ContentCard.vue`
- **ä¼˜åŒ–å†…å®¹**: ç§»é™¤æ‰€æœ‰ `localhost:8080` ç¡¬ç¼–ç åœ°å€
- **æ•ˆæœ**: æ”¯æŒç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼Œé¿å…è®¿é—®åœ°å€é”™è¯¯

#### âœ… ç¯å¢ƒé…ç½®ç³»ç»Ÿ
- **æ–°å¢æ–‡ä»¶**: `src/config/index.js`
- **åŠŸèƒ½**: 
  - æ ¹æ® `NODE_ENV` è‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„ API åœ°å€
  - ç»Ÿä¸€çš„æ–‡ä»¶ URL å¤„ç†å‡½æ•°
  - æ”¯æŒå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒåˆ‡æ¢
  - å¼€å‘ç¯å¢ƒä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨å®Œæ•´åŸŸå

#### âœ… ç»Ÿä¸€æ–‡ä»¶ URL å¤„ç†
- **ä¼˜åŒ–å†…å®¹**: æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ `@/config` ä¸­çš„ `getFileUrlByEnv` å‡½æ•°
- **æ•ˆæœ**: ç»Ÿä¸€çš„æ–‡ä»¶è®¿é—®é€»è¾‘ï¼Œæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„
- **ä¿®å¤**: ç¡®ä¿å¼€å‘ç¯å¢ƒä¸‹å›¾ç‰‡ä»åç«¯8080ç«¯å£è·å–ï¼Œè€Œä¸æ˜¯å‰ç«¯3000ç«¯å£

### 2. åç«¯ä¼˜åŒ–

#### âœ… CORS é…ç½®ä¼˜åŒ–
- **ä¿®æ”¹æ–‡ä»¶**: `WebConfig.java`, `LoginCheckInterceptor.java`
- **ä¼˜åŒ–å†…å®¹**: æ”¯æŒç”Ÿäº§ç¯å¢ƒåŸŸå `https://www.culturezone.space`
- **æ•ˆæœ**: è§£å†³è·¨åŸŸé—®é¢˜ï¼Œæ”¯æŒç”Ÿäº§ç¯å¢ƒè®¿é—®

### 3. Nginx ä¼˜åŒ–é…ç½®

#### âœ… æ–°å¢ä¼˜åŒ–é…ç½®
- **æ–‡ä»¶**: `nginx-optimized.conf`
- **ä¼˜åŒ–å†…å®¹**:
  - Gzip å‹ç¼© (JS, CSS, JSON, XML)
  - é™æ€èµ„æºç¼“å­˜ (1å¹´)
  - HTML æ–‡ä»¶ç¼“å­˜ (1å°æ—¶)
  - å›¾ç‰‡/è§†é¢‘ç¼“å­˜ (1å¹´)
  - API ç¼“å­˜ (1åˆ†é’Ÿ)
  - HTTP/2 æ”¯æŒ
  - å®‰å…¨å¤´é…ç½®
  - SSL ä¼˜åŒ–

## ğŸ“Š æ€§èƒ½æå‡é¢„æœŸ

### å‰ç«¯ä¼˜åŒ–æ•ˆæœ
- **é¦–å±åŠ è½½**: å‡å°‘ 40-60% çš„é˜»å¡æ—¶é—´
- **èµ„æºåŠ è½½**: é€šè¿‡ç¼“å­˜å‡å°‘ 70-80% çš„é‡å¤è¯·æ±‚
- **æ–‡ä»¶è®¿é—®**: ç»Ÿä¸€é…ç½®å‡å°‘é…ç½®é”™è¯¯

### åç«¯ä¼˜åŒ–æ•ˆæœ
- **è·¨åŸŸå¤„ç†**: è§£å†³ç”Ÿäº§ç¯å¢ƒ CORS é—®é¢˜
- **API å“åº”**: é€šè¿‡ç¼“å­˜æå‡å“åº”é€Ÿåº¦

### Nginx ä¼˜åŒ–æ•ˆæœ
- **å‹ç¼©ç‡**: Gzip å‹ç¼©å‡å°‘ 60-80% ä¼ è¾“å¤§å°
- **ç¼“å­˜å‘½ä¸­**: é™æ€èµ„æºç¼“å­˜æå‡ 90% åŠ è½½é€Ÿåº¦
- **SSL æ€§èƒ½**: HTTP/2 å’Œ SSL ä¼˜åŒ–æå‡è¿æ¥é€Ÿåº¦

## ğŸ”§ éƒ¨ç½²æ­¥éª¤

### 1. æœ¬åœ°å¼€å‘ç¯å¢ƒ
```bash
# ä½¿ç”¨å¼€å‘ç¯å¢ƒå¯åŠ¨è„šæœ¬
dev-start.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
cd myzone-backend && mvnw.cmd spring-boot:run
cd myzone-frontend && npm run serve
```

### 2. ç”Ÿäº§ç¯å¢ƒæ„å»º
```bash
# ç”Ÿäº§ç¯å¢ƒæ„å»º
npm run build
```

### 3. åç«¯éƒ¨ç½²
```bash
# æ„å»º JAR åŒ…
mvnw.cmd clean package -DskipTests

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp target/myzone-backend-*.jar ubuntu@20.255.73.221:/home/ubuntu/

# å¯åŠ¨æœåŠ¡
ssh ubuntu@20.255.73.221
cd /home/ubuntu
nohup java -jar myzone-backend-*.jar --spring.profiles.active=prod > backend.log 2>&1 &
```

### 4. Nginx é…ç½®
```bash
# å¤‡ä»½åŸé…ç½®
sudo cp /etc/nginx/sites-available/default /etc/nginx/sites-available/default.bak

# åº”ç”¨ä¼˜åŒ–é…ç½®
sudo cp nginx-optimized.conf /etc/nginx/sites-available/default

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡è½½é…ç½®
sudo systemctl reload nginx
```

## ğŸ¯ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### 1. å‰ç«¯ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: ä½¿ç”¨åŠ¨æ€ import åˆ†å‰² Mapbox ç­‰å¤§å‹åº“
- **å›¾ç‰‡ä¼˜åŒ–**: ä½¿ç”¨ WebP æ ¼å¼ï¼Œå®ç°å“åº”å¼å›¾ç‰‡
- **æ‡’åŠ è½½**: å®ç°å›¾ç‰‡å’Œç»„ä»¶çš„æ‡’åŠ è½½
- **Service Worker**: æ·»åŠ ç¦»çº¿ç¼“å­˜æ”¯æŒ

### 2. åç«¯ä¼˜åŒ–
- **æ•°æ®åº“ä¼˜åŒ–**: æ·»åŠ ç´¢å¼•ï¼Œä¼˜åŒ–æŸ¥è¯¢
- **è¿æ¥æ± **: ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± é…ç½®
- **ç¼“å­˜**: æ·»åŠ  Redis ç¼“å­˜å±‚
- **CDN**: ä½¿ç”¨ CDN åŠ é€Ÿé™æ€èµ„æº

### 3. ç›‘æ§å’Œåˆ†æ
- **æ€§èƒ½ç›‘æ§**: æ·»åŠ æ€§èƒ½ç›‘æ§å·¥å…·
- **é”™è¯¯è¿½è¸ª**: å®ç°é”™è¯¯æ—¥å¿—æ”¶é›†
- **ç”¨æˆ·åˆ†æ**: æ·»åŠ ç”¨æˆ·è¡Œä¸ºåˆ†æ

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡ç›‘æ§

### å…³é”®æŒ‡æ ‡
- **LCP (Largest Contentful Paint)**: ç›®æ ‡ < 2.5s
- **FID (First Input Delay)**: ç›®æ ‡ < 100ms
- **CLS (Cumulative Layout Shift)**: ç›®æ ‡ < 0.1
- **TTFB (Time to First Byte)**: ç›®æ ‡ < 600ms

### ç›‘æ§å·¥å…·
- **Google PageSpeed Insights**: å®šæœŸæ£€æŸ¥æ€§èƒ½åˆ†æ•°
- **Lighthouse**: æœ¬åœ°æ€§èƒ½æµ‹è¯•
- **WebPageTest**: è¯¦ç»†æ€§èƒ½åˆ†æ

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **CORS é”™è¯¯**: æ£€æŸ¥åç«¯ CORS é…ç½®
2. **æ–‡ä»¶è®¿é—® 404**: æ£€æŸ¥ Nginx è·¯å¾„é…ç½®
3. **ç¼“å­˜é—®é¢˜**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜æˆ–æ·»åŠ ç‰ˆæœ¬å·
4. **SSL è¯ä¹¦**: ç¡®ä¿è¯ä¹¦æœ‰æ•ˆä¸”é…ç½®æ­£ç¡®

### è°ƒè¯•å‘½ä»¤
```bash
# æ£€æŸ¥ Nginx é…ç½®
sudo nginx -t

# æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f backend.log

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :8080
```

## ğŸ“ æ€»ç»“

é€šè¿‡ä»¥ä¸Šä¼˜åŒ–ï¼Œé¢„æœŸèƒ½å¤Ÿï¼š
- **æå‡é¦–å±åŠ è½½é€Ÿåº¦ 40-60%**
- **å‡å°‘èµ„æºä¼ è¾“å¤§å° 60-80%**
- **æé«˜ç¼“å­˜å‘½ä¸­ç‡ 90%**
- **è§£å†³ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²é—®é¢˜**
- **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œ SEO è¡¨ç°**

å»ºè®®å®šæœŸç›‘æ§æ€§èƒ½æŒ‡æ ‡ï¼Œæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚ 